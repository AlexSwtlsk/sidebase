# This workflow initializes a newly created repository.
#
# Initialization encompasses:
# - TBD

name: Initialize the repository
on:
  workflow_dispatch:
    inputs:
      repo_name:
        description: 'Name of the target repository'
        required: true
        type: string
      scaffold:
        description: 'Which scaffold to use for repository initialization'
        required: true
        type: choice
        options:
        - test
jobs:
  create_repo:
    runs-on: ubuntu-latest
    env:
      GH_REF: ${{ github.ref }}
      SCAFFOLD: ${{ github.event.inputs.scaffold }}
      REPO_NAME: ${{ github.event.inputs.repo_name }}
      GITHUB_TOKEN: ${{ secrets.GH_WORKFLOW_TOKEN }}
    steps:
      - name: Create the repository
        run: |
          gh repo create --private sidestream-tech/$REPO_NAME
